# Rolodex 3.0 Audit & Action Plan

## Part 1. Technical Audit

### Codebase & Architecture
- **Backend coupling** – `backend/main.py` mixes route definitions, database access, async background orchestration, and AI enrichment code. Refactoring into routers plus service modules will improve testability and let us inject different storage or AI providers.
- **Storage client lifecycle** – `backend/storage.py` initializes Supabase and OpenAI clients at import time, which raises exceptions if credentials are absent. Lazy initialization plus dependency injection will keep local tooling from crashing.
- **Extension footprint** – The MV2-era service worker handles configuration, authentication, capture, retries, and analytics in one bundle. For MV3 we should promote a slimmer orchestration surface that forwards context to the web app.
- **Frontend prototype code** – `frontend/app/page.tsx` still consumes mock/demo tokens and generates fake library entries. We need authenticated data fetching, project-scoped queries, and shared component primitives.

### Quality & Tooling
- **Automated testing gaps** – Backend tests only cover `/health`; frontend Jest and Playwright suites assert on placeholder copy. Expand coverage with realistic fixtures, contract tests, and smoke journeys that reflect today’s UI.
- **CI/DevEx** – There is no enforced CI pipeline. Add lint/type/test jobs, seed scripts, and one-click environment bootstrap instructions.
- **Documentation drift** – PRD promises right-click capture, editable metadata, projects, and moodboard exports, yet large portions remain unimplemented. Align README/BUILD docs with the actual setup process.

## Part 2. Product & UX Assessment

### Experience Review
- **Capture journey** – Designers cannot confirm whether the extension saved anything because the current flow depends on heavy background logic. A simple handoff into a focused capture workspace will build trust.
- **Library reality** – The grid/list toggle and filters are attractive but operate on mock data. Without real search, bulk actions, or project context the tool fails the promised “designer-grade workspace”.
- **Projects & exports** – No working projects dashboard, moodboard canvas, or export surface exists, so the product does not yet deliver on the concept of “deploying” FF&E inspiration.

### Recommendations
- Ground each surface (capture, library, projects, moodboards) in a narrative of “confirm, organize, present”.
- Add progressive disclosure so designers can save quickly and refine later (drafts, quick edits, reminders).
- Instrument success metrics (capture conversion, project activity, export usage) to inform PM decisions.

## Part 3. Imagineer Blueprint

### Vision
Rolodex 3.0 is the fastest, most trustworthy way for interior designers to capture inspiration from the web, enrich it with AI, and assemble polished presentations. The Chrome extension becomes a lightweight trigger that opens a rich web experience rather than duplicating business logic.

### Experience Pillars
1. **Capture without friction** – Context menu launch → prefilled capture workspace → save in under three steps.
2. **Design-grade workspace** – Library, projects, and moodboards feel like professional design tools with drag-and-drop, keyboard shortcuts, and responsive layouts.
3. **Trustworthy intelligence** – AI enrichment is transparent, editable, and never blocks manual control.
4. **Invisible infrastructure** – Background services are observable, resilient, and compliant with Chrome Store requirements.

## Rolodex 3.0 Roadmap (9 Weeks)

### Phase 0 – Foundations (Weeks 0–2)
- Spin up staging Supabase + Fly.io backend with secret management and data parity.
- Enforce CI with lint, type-check, unit, and smoke tests across frontend/backend/extension.
- Implement OTLP tracing, structured logging, and alerting for failure budgets.
- Refresh Figma kit, tokens, and capture flow documentation for designers and engineers.

### Phase 1 – Extension 3.0 & Capture Launcher (Weeks 2–4)
- Ship Manifest V3 extension handling only context menu, environment detection, and secure deep-link handoff to `/capture`.
- Support signed JWT deep links (`/capture?image=…&source=…`) with limited lifetime tokens.
- Provide zero-install developer scripts plus MV3 linting and packaging automation.

### Phase 2 – Capture Workspace (Weeks 2–5)
- Build dedicated `/capture` route with hero preview, editable metadata form, AI extraction indicators, and confidence badges.
- Integrate AI extraction service with graceful fallbacks, inline validation, and draft persistence.
- Enable autosave and reminders for incomplete captures so work is never lost.

### Phase 3 – Library & Projects Refresh (Weeks 4–7)
- Replace demo token logic with real Supabase or Clerk auth; add API authorization guards.
- Ship refreshed library grid/list with saved filters, semantic/text search toggle, bulk actions, and a project sidebar.
- Implement project moodboard canvas with drag-and-drop, snapping, templates, and PDF/JPG export pipelines.

### Phase 4 – AI & Automation Enhancements (Weeks 6–8)
- Fine-tune extraction prompts per retailer and introduce background queues for retries/enrichment.
- Add palette/material detection microservices and store embeddings for advanced search and recommendations.
- Launch a “Suggest for Brief” endpoint that curates collections via vector similarity plus rule engine.

### Phase 5 – Polish & Launch (Weeks 8–9)
- Complete accessibility audit (WCAG 2.2 AA), keyboard coverage, and screen-reader scripts.
- Externalize copy for localization (English baseline with Spanish/Italian placeholders).
- Prepare Chrome Web Store assets, motion previews, marketing landing refresh, and beta onboarding.

## Cross-Functional Workstreams

1. **Chrome Extension Lite** – Modularize config/storage utilities, add OAuth handshake, and emit telemetry for install/context events. Bundle packaging with checksum for release candidates.
2. **Capture & Library Frontend** – Build capture form primitives (image cropper, hex picker, price parser), integrate Supabase session management with SWR caching, and polish UX with skeletons/microinteractions.
3. **Backend & AI Platform** – Split FastAPI into routers/services, lazily initialize clients, enforce Supabase JWT validation, and introduce a Celery (or equivalent) task queue for extraction + embedding jobs.
4. **Data, Search & Analytics** – Harden pgvector schema, add migration tooling, capture search quality telemetry, and wire usage analytics (Segment → BigQuery) for capture success and engagement.
5. **Quality, Security & Compliance** – Expand pytest/Jest/Playwright coverage, align copy with tests, complete threat modeling, and publish release + rollback checklists.
6. **Go-To-Market & Operations** – Recruit designer beta cohort, add NPS prompts, prepare marketing collateral, document support workflows, and define pricing experiments.

## Detailed Execution Plan

### Milestone Timeline (Weeks 0–9)

| Week | Engineering Focus | Design & Research | QA & Ops | Key Outcomes |
| --- | --- | --- | --- | --- |
| 0 | Stand up staging Supabase, configure Fly.io services, scaffold telemetry | Audit capture flow in Figma, refresh component tokens | Draft test strategy, set up monitoring dashboards | Shared staging stack with observability baseline |
| 1 | Extract FastAPI routers/services, add config loader, implement pytest scaffolding | Validate capture storyboard with designers, define success metrics | Implement automated smoke tests for `/health` and frontend shell | Modular backend ready for feature work |
| 2 | Ship MV3 extension skeleton (context menu → deep link), integrate JWT signing | Finalize capture workspace wireframes and micro-interactions | Add extension packaging CI and signed artifact verification | Click-to-capture deep link in staging |
| 3 | Build `/capture` route, wire Supabase auth, begin AI extraction service | Produce motion prototypes, empty state visuals, accessibility specs | Create capture E2E script in Playwright | Functional capture surface with autosave |
| 4 | Refresh library grid/list, implement saved filters & search toggle | Conduct moderated user tests on capture flow | Expand regression suite (grid/list toggles, filtering) | Authenticated library experience |
| 5 | Deliver projects sidebar, moodboard canvas MVP, export API | Iterate on project organization UX, finalize export templates | Run performance audits, Lighthouse checks | Projects + export pipeline live |
| 6 | Add background queue for AI enrichment, palette detection microservice | Script AI transparency copy, edit inline education moments | Introduce chaos testing for queues & retries | Reliable enrichment with resilience |
| 7 | Harden analytics events, hook Segment → BigQuery, finalize pricing experiments | Prep marketing landing updates, craft onboarding checklist | Execute security review, threat modeling session | Data-informed go-to-market readiness |
| 8 | Accessibility fixes, localization scaffolding, finalize release automation | Polish UI, ensure consistency across capture/library/projects | Conduct full regression, beta sign-off | Launch candidate build |
| 9 | Address launch blockers, prep Chrome Web Store submission, finalize docs | Deliver marketing assets, walkthrough videos, beta comms | Validate rollback playbook, support handoff | Rolodex 3.0 GA |

### Workstream Backlogs & Owners

- **Chrome Extension Lite (Eng Owner: Extension Lead)**
  - Implement MV3 service worker with context menu trigger and runtime messaging to the web app.
  - Build secure token handoff (`chrome.identity`, JWT short-lived tokens) and environment-aware redirects.
  - Automate linting (`chrome-webstore-upload-cli`, `web-ext lint`) and release channel promotion scripts.

- **Capture & Library Frontend (Eng Owner: Frontend Lead, Design Owner: Product Designer)**
  - Create capture form primitives (image cropper, AI confidence badges, hex picker) with design token alignment.
  - Replace mock data with Supabase-backed SWR hooks, implement optimistic updates, and skeleton loaders.
  - Deliver project moodboard canvas with drag handles, snapping grid, and export modal (PDF, JPG, share link).

- **Backend & AI Platform (Eng Owner: Platform Lead)**
  - Split FastAPI into routers/services, add async Supabase adapter, and enforce JWT guardrails.
  - Introduce task queue (Celery/RQ) for extraction, embeddings, and notification fanout with retries + DLQ.
  - Provide admin dashboards (Flower/FastAPI Admin) to monitor queue depth, enrichment status, and failures.

- **Data, Search & Analytics (Eng Owner: Data Lead)**
  - Apply pgvector migrations, seed embeddings, and expose semantic + keyword search endpoints.
  - Instrument core events (capture success, edits, exports, share) flowing into Segment → BigQuery.
  - Deliver Looker Studio dashboards for engagement cohorts, capture conversion, and AI usage quality.

- **Quality, Security & Compliance (QA Owner: QA Lead, Sec Owner: Security Consultant)**
  - Expand pytest/Jest/Playwright coverage to 80%+ on critical paths; align snapshot tests with new UI copy.
  - Perform dependency audit, implement SAST/DAST scans, and document security review findings.
  - Build release checklist with rollback plan, incident response procedures, and uptime SLOs.

- **Go-To-Market & Operations (PM Owner: Product Manager)**
  - Recruit beta cohort, run weekly feedback loops, and prioritize roadmap adjustments.
  - Prepare marketing landing refresh, tutorial content, and Chrome Web Store assets (screenshots, video).
  - Define pricing packages, trial periods, and in-app upgrade prompts tied to analytics funnel.

### Dependencies & Integration Points

- The `/capture` deep link must land inside an authenticated session—coordinate extension JWT handoff with frontend auth integration.
- AI enrichment queue requires clean separation between synchronous capture save and asynchronous metadata updates to avoid blocking users.
- Moodboard export relies on backend rendering pipeline; ensure file storage (Supabase/Cloudflare R2) supports signed download URLs.
- Analytics instrumentation should piggyback on frontend event bus and backend webhooks to maintain consistency across surfaces.

### Risk Matrix & Mitigations

| Risk | Impact | Mitigation |
| --- | --- | --- |
| MV3 review delays | High | Submit early beta build by Week 6, keep MV2 fallback archived, maintain Chrome Store liaison updates |
| AI extraction variability | High | Maintain confidence scoring, manual override UI, and prompt versioning in feature flags |
| Auth/session drift between extension and web | Medium | Share JWT utilities, add contract tests, monitor auth failure metrics |
| Export performance for large moodboards | Medium | Stream rendering, add background export option, benchmark on staging |
| Scope creep across workstreams | Medium | Weekly program reviews, maintain backlog triage, enforce definition of done |

## Conclusion
By combining the technical hardening in Part 1, the product and UX focus from Part 2, and the expanded execution roadmap above, the Rolodex team can deliver a lightweight extension that unlocks a polished, intelligent web workspace. Executed together, these tracks become Rolodex 3.0—a reliable, designer-grade system for capturing, organizing, and presenting FF&E inspiration.
